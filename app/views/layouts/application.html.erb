<!DOCTYPE html>
<html>
  <head>
    <title>Truckstalkers</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- CSS
    ================================================== -->
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/main-color.css" id="colors">
  </head>

<body>

<!-- Wrapper -->
<div id="wrapper">

<!-- Header Container
================================================== -->
<header id="header-container">

	<!-- Header -->
	<div id="header" class="not-sticky">
		<div class="container">

			<!-- Left Side Content -->
			<div class="left-side">

				<!-- Logo -->
				<div id="logo">
					<a href="/"><img src="/img/truckstalkers-wording-logo.png" alt=""></a>
				</div>

				<!-- Mobile Navigation -->
				<div class="mmenu-trigger">
					<button class="hamburger hamburger--collapse" type="button">
						<span class="hamburger-box">
							<span class="hamburger-inner"></span>
						</span>
					</button>
				</div>

				<!-- R: Main Navigation -->
				<div class="clearfix"></div>
				<!-- Main Navigation / End -->

			</div>
			<!-- Left Side Content / End -->

			<!-- Right Side Content / End -->
			<div class="right-side">
				<div class="header-widget">
        <% if current_user %>
          <!-- User Menu -->
					<div class="user-menu">
						<div class="user-name"><span><img src="/img/stock/dashboard-avatar-p.jpg" alt=""></span>Hi, <%= current_user.name %>!</div>
						<ul>
							<li><a href="dashboard.html"><i class="sl sl-icon-settings"></i> Dashboard</a></li>
							<li><a href="dashboard-messages.html"><i class="sl sl-icon-envelope-open"></i> Messages</a></li>
							<li><a href="dashboard-bookings.html"><i class="fa fa-calendar-check-o"></i> Bookings</a></li>
							<li><a href="/logout"><i class="sl sl-icon-power"></i> Logout</a></li>
						</ul>
					</div>

        <% else %>
					<a href="#sign-in-dialog" class="sign-in popup-with-zoom-anim"><i class="sl sl-icon-login"></i> Sign In</a>
        <% end %>
          <!-- R: Add listing -->

				</div>
			</div>
			<!-- Right Side Content / End -->

			<!-- Sign In Popup -->
			<div id="sign-in-dialog" class="zoom-anim-dialog mfp-hide">

				<div class="small-dialog-header">
					<h3>Sign In</h3>
				</div>

				<!--Tabs -->
				<div class="sign-in-form style-1">

					<ul class="tabs-nav">
						<li class=""><a href="#tab1">Log In</a></li>
						<li><a href="#tab2">Register</a></li>
					</ul>

					<div class="tabs-container alt">

						<!-- Login -->
						<div class="tab-content" id="tab1" style="display: none;">
            <%= form_tag '/login' do %>
              <label for="username">Email:
                <i class="im im-icon-Mail"></i>
                <%= text_field_tag :email %>
              </label>
              <label for="password">Password:
                <i class="im im-icon-Lock-2"></i>
                <%= password_field_tag :password %>
              </label>
              <%= submit_tag "Submit" %>
            <% end %>
            <!-- TODO: Remember me checkbox -->
						</div>

						<!-- Register -->
						<div class="tab-content" id="tab2" style="display: none;">
            <%= form_for :user, url: '/users' do |f| %>
              <label for="name">Username:
                <i class="im im-icon-Male"></i>
                <%= f.text_field :name %>
              </label>
              <label for="email">Email Address:
                <i class="im im-icon-Mail"></i>
                <%= f.text_field :email %>
              </label>
              <label for="password">Password:
                <i class="im im-icon-Lock-2"></i>
                <%= f.password_field :password %>
              </label>
              <label for="password_confirmation">Password Confirmation:
                <i class="im im-icon-Lock-2"></i>
                <%= f.password_field :password_confirmation %>
              </label>
              <%= f.submit "Register" %>
            <% end %>
						</div>

					</div>
				</div>
			</div>
			<!-- Sign In Popup / End -->

		</div>
	</div>
	<!-- Header / End -->

</header>
<div class="clearfix"></div>
<!-- Header Container / End -->




    <%= yield %>



<!-- Footer
================================================== -->
<div id="footer" class="margin-top-15">
	<!-- Main -->
	<div class="container">
		<div class="row">
			<div class="col-md-5 col-sm-6">
				<img class="footer-logo" src="/img/truckstalkers-wording-logo.png" alt="">
				<br><br>
				<p>Stalk your favourite food truck or browse through our directory of food trucks.</p>
			</div>
      <!-- R: Links -->
			<!-- R: Contact -->

		</div>

		<!-- Copyright -->
		<div class="row">
			<div class="col-md-12">
				<div class="copyrights">Â© 2019 TruckStalkers. All Rights Reserved.</div>
			</div>
		</div>

	</div>

</div>
<!-- Footer / End -->


<!-- Back To Top Button -->
<div id="backtotop"><a href="#"></a></div>

<!-- Booking Sticky Footer -->
<% if @truck %>
	<div class="booking-sticky-footer">
		<div class="container">
			<div class="bsf-left">
				<h4><%= @truck.name %></h4>
				<div class="star-rating" data-rating="<%= @truck.reviews_summary[:average_rating].round(1) %>">
					<div class="rating-counter"></div>
				</div>
			</div>
			<div class="bsf-right">
				<a href="#booking-widget-anchor" class="button">Eat now</a>
			</div>
		</div>
	</div>
<% end %>

</div>
<!-- Wrapper / End -->


<!-- Scripts
================================================== -->
<script type="text/javascript" src="/scripts/jquery-3.4.1.min.js"></script>
<script type="text/javascript" src="/scripts/jquery-migrate-3.1.0.min.js"></script>
<script type="text/javascript" src="/scripts/mmenu.min.js"></script>
<script type="text/javascript" src="/scripts/chosen.min.js"></script>
<script type="text/javascript" src="/scripts/slick.min.js"></script>
<script type="text/javascript" src="/scripts/rangeslider.min.js"></script>
<script type="text/javascript" src="/scripts/magnific-popup.min.js"></script>
<script type="text/javascript" src="/scripts/waypoints.min.js"></script>
<script type="text/javascript" src="/scripts/counterup.min.js"></script>
<script type="text/javascript" src="/scripts/jquery-ui.min.js"></script>
<script type="text/javascript" src="/scripts/tooltips.min.js"></script>
<script type="text/javascript" src="/scripts/custom.js"></script>


<!-- Booking Widget - Quantity Buttons -->
<%# <script src="/scripts/quantityButtons.js"></script> %>

<!-- Date Range Picker - docs: http://www.daterangepicker.com/ -->
<script src="/scripts/moment.min.js"></script>
<script src="/scripts/daterangepicker.js"></script>
<script>
// Calendar Init
$(function() {
	$('#date-picker').daterangepicker({
		"opens": "left",
		singleDatePicker: true,

		// Disabling Date Ranges
		isInvalidDate: function(date) {
		// Disabling Date Range
		var disabled_start = moment('09/02/2018', 'MM/DD/YYYY');
		var disabled_end = moment('09/06/2018', 'MM/DD/YYYY');
		return date.isAfter(disabled_start) && date.isBefore(disabled_end);

		// Disabling Single Day
		// if (date.format('MM/DD/YYYY') == '08/08/2018') {
		//     return true;
		// }
		}
	});
});

// Calendar animation
$('#date-picker').on('showCalendar.daterangepicker', function(ev, picker) {
	$('.daterangepicker').addClass('calendar-animated');
});
$('#date-picker').on('show.daterangepicker', function(ev, picker) {
	$('.daterangepicker').addClass('calendar-visible');
	$('.daterangepicker').removeClass('calendar-hidden');
});
$('#date-picker').on('hide.daterangepicker', function(ev, picker) {
	$('.daterangepicker').removeClass('calendar-visible');
	$('.daterangepicker').addClass('calendar-hidden');
});
</script>


<!-- Replacing dropdown placeholder with selected time slot -->
<script>
$(".time-slot").each(function() {
	var timeSlot = $(this);
	$(this).find('input').on('change',function() {
		var timeSlotVal = timeSlot.find('strong').text();

		$('.panel-dropdown.time-slots-dropdown a').html(timeSlotVal);
		$('.panel-dropdown').removeClass('active');
	});
});
</script>

</body>
</html>
